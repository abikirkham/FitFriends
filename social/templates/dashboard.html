<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-dark bg-dark">
        <a class="navbar-brand" href="#">Fit Friends</a>
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'logout' %}">Logout</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'profile' user.username %}">My Profile</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'messages' %}">Messages</a>
            </li>
        </ul>
    </nav>
    <div class="container mt-5">
        <h2>Dashboard</h2>
        <h3>Post an update to your fit friends</h3>
        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                <input type="text" class="form-control" name="title" placeholder="Title">
            </div>
            <div class="form-group">
                <textarea class="form-control" name="content" placeholder="Content"></textarea>
            </div>
            <button type="submit" class="btn btn-primary" name="post_status">Post Status</button>
        </form>
        <h4>Posts</h4>
        <ul class="list-group">
            {% for post in posts %}
                <li class="list-group-item">
                    <strong><a href="{% url 'profile' post.author.username %}">{{ post.title }}</a></strong> by <a href="{% url 'profile' post.author.username %}">{{ post.author.username }}</a> on {{ post.created_at|date:"F d, Y H:i" }}<br>
                    {{ post.content }}<br>
                    <form method="post">
                        {% csrf_token %}
                        <input type="hidden" name="post_id" value="{{ post.id }}">
                        <div class="form-group">
                            <textarea class="form-control" name="content" placeholder="Comment"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary" name="post_comment">Post Comment</button>
                    </form>
                    <form method="post">
                        {% csrf_token %}
                        <input type="hidden" name="post_id" value="{{ post.id }}">
                        <button type="submit" class="btn btn-primary" name="like_post">{% if request.user in post.likes.all %}Unlike{% else %}Like{% endif %}</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    </div>
</body>
</html>
